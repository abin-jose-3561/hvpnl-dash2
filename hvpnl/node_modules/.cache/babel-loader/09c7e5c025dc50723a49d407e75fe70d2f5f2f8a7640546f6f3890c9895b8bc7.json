{"ast":null,"code":"import _regeneratorRuntime from\"E:/hvpnl-dash2/hvpnl/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"E:/hvpnl-dash2/hvpnl/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"E:/hvpnl-dash2/hvpnl/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/hvpnl-dash2/hvpnl/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Chart as ChartJs,Tooltip,Title,ArcElement,Legend}from'chart.js';import{Doughnut}from'react-chartjs-2';import{jsx as _jsx}from\"react/jsx-runtime\";ChartJs.register(Tooltip,Title,ArcElement,Legend);function PieChart(){var _useState=useState({datasets:[{data:[0,0,0,0],backgroundColor:['red','blue','yellow','green']}],labels:['0','0','0','0']}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,dataSet1,dataSet2,label;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url='http://localhost:3001/tb';dataSet1=[];dataSet2=[];label=[];_context.next=6;return fetch(url).then(function(data){console.log(\"Api data\",data);var res=data.json();return res;}).then(function(res){console.log(\"ressss\",res);var _iterator=_createForOfIteratorHelper(res),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;dataSet1.push(val.ckt);label.push(val.voltagelevel);dataSet2.push(val.nolines);}}catch(err){_iterator.e(err);}finally{_iterator.f();}setData({labels:label,datasets:[{label:'Total Circuit KM',data:dataSet1,backgroundColor:['#7CFC00','#32CD32','#ADFF2F','#2E8B57','#d8aafa','#faaacf']},{label:'Number of Lines',data:dataSet2,backgroundColor:['#00BFFF','#4682B4','#aaacfa','#aafaf7','#8A2BE2','#faaacf']}]});console.log(\"arrData\",dataSet1);}).catch(function(e){console.log(\"error\",e);});case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsx(Doughnut,{data:data});}export default PieChart;","map":{"version":3,"names":["useEffect","useState","Chart","ChartJs","Tooltip","Title","ArcElement","Legend","Doughnut","register","PieChart","datasets","data","backgroundColor","labels","setData","fetchData","url","dataSet1","dataSet2","label","fetch","then","console","log","res","json","val","push","ckt","voltagelevel","nolines","catch","e"],"sources":["E:/hvpnl-dash2/hvpnl/src/components/PieChart.jsx"],"sourcesContent":["\r\nimport { useEffect,useState } from \"react\";\r\nimport {Chart as ChartJs, Tooltip, Title, ArcElement, Legend} from 'chart.js';\r\nimport { Doughnut } from 'react-chartjs-2';\r\nChartJs.register(\r\n  Tooltip, Title, ArcElement, Legend\r\n);\r\n\r\nfunction PieChart(){\r\n  const [data, setData] = useState({\r\n    datasets: [{\r\n      data: [0,0,0,0],\r\n        backgroundColor:[\r\n          'red',\r\n          'blue',\r\n          'yellow',\r\n          'green'\r\n        ]\r\n    },\r\n  ],\r\n  labels: [\r\n    '0',\r\n    '0',\r\n    '0',\r\n    '0'\r\n],\r\n});\r\n\r\n  useEffect(()=> {\r\n    const fetchData= async()=> {\r\n        const url = 'http://localhost:3001/tb'\r\n        const dataSet1 = [];\r\n        const dataSet2 = [];\r\n        const label=[];\r\n      await fetch(url).then((data)=> {\r\n          console.log(\"Api data\", data)\r\n          const res = data.json();\r\n          return res\r\n      }).then((res) => {\r\n          console.log(\"ressss\", res)\r\n         for (const val of res) {\r\n             dataSet1.push(val.ckt);\r\n             label.push(val.voltagelevel);\r\n             dataSet2.push(val.nolines);\r\n         }\r\n\r\n         setData({\r\n             labels:label,\r\n             datasets: [\r\n               {\r\n                 label: 'Total Circuit KM',\r\n                 data:dataSet1,\r\n                 backgroundColor:[\r\n                  '#7CFC00',\r\n                  '#32CD32',\r\n                  '#ADFF2F',\r\n                  '#2E8B57',\r\n                  '#d8aafa',\r\n                  '#faaacf',\r\n                ]\r\n               },{\r\n                label: 'Number of Lines',\r\n                data:dataSet2,\r\n                backgroundColor:[\r\n                 '#00BFFF',\r\n                 '#4682B4',\r\n                 '#aaacfa',\r\n                 '#aafaf7',\r\n                 '#8A2BE2',\r\n                 '#faaacf',\r\n               ]\r\n              },\r\n\r\n             ],\r\n\r\n           })\r\n         console.log(\"arrData\", dataSet1)\r\n\r\n      }).catch(e => {\r\n\r\n             console.log(\"error\", e)\r\n\r\n         })\r\n        }\r\n         fetchData();\r\n        }, [])\r\n\r\n\r\n  return (\r\n      <Doughnut data={data}/>\r\n    \r\n    );\r\n\r\n}\r\n\r\nexport default PieChart;\r\n "],"mappings":"gdACA,OAASA,SAAS,CAACC,QAAQ,KAAQ,OAAO,CAC1C,OAAQC,KAAK,GAAIC,QAAO,CAAEC,OAAO,CAAEC,KAAK,CAAEC,UAAU,CAAEC,MAAM,KAAO,UAAU,CAC7E,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,2CAC3CL,OAAO,CAACM,QAAQ,CACdL,OAAO,CAAEC,KAAK,CAAEC,UAAU,CAAEC,MAAM,CACnC,CAED,QAASG,SAAQ,EAAE,CACjB,cAAwBT,QAAQ,CAAC,CAC/BU,QAAQ,CAAE,CAAC,CACTC,IAAI,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACbC,eAAe,CAAC,CACd,KAAK,CACL,MAAM,CACN,QAAQ,CACR,OAAO,CAEb,CAAC,CACF,CACDC,MAAM,CAAE,CACN,GAAG,CACH,GAAG,CACH,GAAG,CACH,GAAG,CAEP,CAAC,CAAC,wCAjBOF,IAAI,eAAEG,OAAO,eAmBpBf,SAAS,CAAC,UAAK,CACb,GAAMgB,UAAS,4FAAE,oKACPC,GAAG,CAAG,0BAA0B,CAChCC,QAAQ,CAAG,EAAE,CACbC,QAAQ,CAAG,EAAE,CACbC,KAAK,CAAC,EAAE,uBACVC,MAAK,CAACJ,GAAG,CAAC,CAACK,IAAI,CAAC,SAACV,IAAI,CAAI,CAC3BW,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEZ,IAAI,CAAC,CAC7B,GAAMa,IAAG,CAAGb,IAAI,CAACc,IAAI,EAAE,CACvB,MAAOD,IAAG,CACd,CAAC,CAAC,CAACH,IAAI,CAAC,SAACG,GAAG,CAAK,CACbF,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEC,GAAG,CAAC,0CACTA,GAAG,YAArB,+CAAuB,IAAZE,IAAG,aACVT,QAAQ,CAACU,IAAI,CAACD,GAAG,CAACE,GAAG,CAAC,CACtBT,KAAK,CAACQ,IAAI,CAACD,GAAG,CAACG,YAAY,CAAC,CAC5BX,QAAQ,CAACS,IAAI,CAACD,GAAG,CAACI,OAAO,CAAC,CAC9B,CAAC,qDAEDhB,OAAO,CAAC,CACJD,MAAM,CAACM,KAAK,CACZT,QAAQ,CAAE,CACR,CACES,KAAK,CAAE,kBAAkB,CACzBR,IAAI,CAACM,QAAQ,CACbL,eAAe,CAAC,CACf,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CAEZ,CAAC,CAAC,CACDO,KAAK,CAAE,iBAAiB,CACxBR,IAAI,CAACO,QAAQ,CACbN,eAAe,CAAC,CACf,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CACT,SAAS,CAEZ,CAAC,CAIJ,CAAC,CAAC,CACJU,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEN,QAAQ,CAAC,CAEnC,CAAC,CAAC,CAACc,KAAK,CAAC,SAAAC,CAAC,CAAI,CAEPV,OAAO,CAACC,GAAG,CAAC,OAAO,CAAES,CAAC,CAAC,CAE3B,CAAC,CAAC,sDACF,kBAtDCjB,UAAS,0CAsDV,CACAA,SAAS,EAAE,CACZ,CAAC,CAAE,EAAE,CAAC,CAGZ,mBACI,KAAC,QAAQ,EAAC,IAAI,CAAEJ,IAAK,EAAE,CAI7B,CAEA,cAAeF,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}